const navBtn=document.getElementById("navToggle"),nav=document.getElementById("nav"),page=document.getElementById("page"),body=document.body;function showNav(){var e=document.createElement("div");e.classList.add("page__mask"),e.addEventListener("click",closeNav),page.appendChild(e),body.classList.add("show-nav")}function closeNav(){body.classList.remove("show-nav"),document.querySelector(".page__mask").remove()}navBtn.addEventListener("click",e=>{(body.classList.contains("show-nav")?closeNav:showNav)()});const modalBtn=document.querySelectorAll("[data-modal]"),modalClose=document.querySelectorAll(".modal__close"),modal=document.querySelectorAll(".modal");function closeModal(e){e.querySelector(".modal__inner").removeAttribute("style"),setTimeout(()=>{e.classList.remove("show"),body.classList.remove("no-scroll")},200)}modalBtn.forEach(e=>{e.addEventListener("click",e=>{e=e.currentTarget.getAttribute("data-modal"),e=document.getElementById(e);let t=e.querySelector(".modal__inner");t.addEventListener("click",e=>{e.stopPropagation()}),e.classList.add("show"),body.classList.add("no-scroll"),setTimeout(()=>{t.style.transform="none",t.style.opacity="1"},1)})}),modalClose.forEach(e=>{e.addEventListener("click",e=>{closeModal(e.currentTarget.closest(".modal"))})}),modal.forEach(e=>{e.addEventListener("click",e=>{closeModal(e.currentTarget)})});const commentForm=document.querySelector(".commentForm"),profileName="John Martin",profileAvatar="https://placehold.it/40";function newCommentHandler(e){e.preventDefault();var e=this.querySelector(".commentInput"),t=this.nextElementSibling,n=e.value,o=createElement("li","comments__item"),a=createElement("div","comments__header"),l=createElement("img","comments__img"),r=(l.src=profileAvatar,createElement("div","comments__author")),c=createElement("h5","comments__title"),s=(c.innerText=profileName,createElement("time","comments__date")),m=ComDate(new Date),m=(s.innerText=`${m[2]}.${m[1]}.${m[0]}.`,s.setAttribute("dateTime",`${m[0]}-${m[1]}-${m[2]}T${m[3]}:`+m[4]),createElement("div","comments__text")),n=(m.innerText=n,createElement("div","comments__btns")),d=createElement("button","comments__reply"),i=(d.classList.add("deleteBtn"),d.setAttribute("type","button"),d.innerText="удалить",createElement("button","comments__reply"));i.classList.add("replyBtn"),i.setAttribute("type","button"),i.innerText="ответить",r.append(c),r.append(s),a.append(l),a.append(r),n.append(i),i.addEventListener("click",replyHandler),n.append(d),d.addEventListener("click",function(){this.closest("li").remove()}),o.append(a),o.append(m),o.append(n),t.append(o),this.classList.contains("mainComForm")||this.remove(),e.value="",e.focus()}function createElement(e,t){e=document.createElement(e);return e.classList.add(t),e}function ComDate(e){return[e.getFullYear(),1==(""+(e.getMonth()+1)).length?"0"+(e.getMonth()+1):""+(e.getMonth()+1),1==(""+e.getDate()).length?"0"+e.getDate():""+e.getDate(),e.getHours(),e.getMinutes()]}commentForm.addEventListener("submit",newCommentHandler);const replyButtons=document.querySelectorAll(".replyBtn"),hideButtons=document.querySelectorAll(".hideBtn"),showButtons=document.querySelectorAll(".showBtn");function replyHandler(e){e.preventDefault();var e=this.closest("li"),t=createElement("ul","comments__list"),n=commentForm.cloneNode(!0);n.classList.remove("mainComForm"),n.style["margin-top"]="1.5rem",e.append(n),n.querySelector(".commentInput").focus(),e.append(t),n.addEventListener("submit",newCommentHandler)}replyButtons.forEach(e=>{e.addEventListener("click",replyHandler)});