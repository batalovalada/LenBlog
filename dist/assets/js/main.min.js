const navBtn=document.getElementById("navToggle"),nav=document.getElementById("nav"),page=document.getElementById("page"),body=document.body;function showNav(){var e=document.createElement("div");e.classList.add("page__mask"),e.addEventListener("click",closeNav),page.appendChild(e),body.classList.add("show-nav")}function closeNav(){body.classList.remove("show-nav"),document.querySelector(".page__mask").remove()}navBtn.addEventListener("click",e=>{(body.classList.contains("show-nav")?closeNav:showNav)()});const modalBtn=document.querySelectorAll("[data-modal]"),modalClose=document.querySelectorAll(".modal__close"),modal=document.querySelectorAll(".modal");function closeModal(e){e.querySelector(".modal__inner").removeAttribute("style"),setTimeout(()=>{e.classList.remove("show"),body.classList.remove("no-scroll")},200)}modalBtn.forEach(e=>{e.addEventListener("click",e=>{e=e.currentTarget.getAttribute("data-modal"),e=document.getElementById(e);let t=e.querySelector(".modal__inner");t.addEventListener("click",e=>{e.stopPropagation()}),e.classList.add("show"),body.classList.add("no-scroll"),setTimeout(()=>{t.style.transform="none",t.style.opacity="1"},1)})}),modalClose.forEach(e=>{e.addEventListener("click",e=>{closeModal(e.currentTarget.closest(".modal"))})}),modal.forEach(e=>{e.addEventListener("click",e=>{closeModal(e.currentTarget)})});const commentForm=document.querySelector(".commentForm"),profileName="John Martin",profileAvatar="https://placehold.it/40";function newCommentHandler(e){e.preventDefault();var e=this.closest("li").querySelector(".cancelBtn"),e=(null!=e&&(e.removeEventListener("click",cancelHandler),e.classList.remove("cancelBtn"),e.classList.add("replyBtn"),e.innerText="ответить"),this.querySelector(".commentInput")),t=this.nextElementSibling,n=e.value;if(""==n)return this.remove(),null==t.children[0]&&t.remove(),0;var l=createElement("li","comments__item"),o=createElement("div","comments__header"),r=createElement("img","comments__img"),c=(r.src=profileAvatar,createElement("div","comments__author")),s=createElement("h5","comments__title"),a=(s.innerText=profileName,createElement("time","comments__date")),i=ComDate(new Date),i=(a.innerText=`${i[2]}.${i[1]}.${i[0]}.`,a.setAttribute("dateTime",`${i[0]}-${i[1]}-${i[2]}T${i[3]}:`+i[4]),createElement("div","comments__text")),n=(i.innerText=n,createElement("div","comments__btns commentBtns")),m=createElement("button","comments__reply deleteBtn"),d=(m.setAttribute("type","button"),m.innerText="удалить",createElement("button","comments__reply replyBtn"));d.setAttribute("type","button"),d.innerText="ответить",c.append(s,a),o.append(r,c),n.append(d,m),d.addEventListener("click",replyHandler),m.addEventListener("click",function(){var e=this.closest("ul");this.closest("li").remove(),null==e.children[0]&&(e.closest("li").querySelector(".hideBtn").remove(),e.remove())}),l.append(o,i,n),t.append(l),this.classList.contains("mainComForm")||(this.remove(),null==(a=(s=t.closest("li").querySelector(".commentBtns")).querySelector(".hideBtn"))&&((a=createElement("button","comments__reply comments__reply--all hideBtn")).innerText="скрыть ответы",a.addEventListener("click",hideHandler),s.append(a))),e.value="",e.focus()}function createElement(e,t){var n=document.createElement(e);for(item of t=t.split(" "))n.classList.add(item);return n}function ComDate(e){return[e.getFullYear(),1==(""+(e.getMonth()+1)).length?"0"+(e.getMonth()+1):""+(e.getMonth()+1),1==(""+e.getDate()).length?"0"+e.getDate():""+e.getDate(),e.getHours(),e.getMinutes()]}commentForm.addEventListener("submit",newCommentHandler);const replyButtons=document.querySelectorAll(".replyBtn"),hideButtons=document.querySelectorAll(".hideBtn");function replyHandler(e){e.preventDefault();e=this.closest("li");let t=e.querySelector(".commentForm"),n=e.querySelector(".commentsList");null==n&&(n=createElement("ul","comments__list commentsList"),e.append(n)),null==t&&((t=commentForm.cloneNode(!0)).classList.remove("mainComForm"),t.style["margin-top"]="1.5rem",n.parentNode.insertBefore(t,n),this.classList.remove("replyBtn"),this.classList.add("cancelBtn"),this.innerText="отмена",this.addEventListener("click",cancelHandler,{once:!0})),t.querySelector(".commentInput").focus(),t.addEventListener("submit",newCommentHandler)}function hideHandler(e){e.preventDefault();e=this.closest("li").querySelector(".commentsList");e.classList.toggle("hide"),this.innerText=e.classList.contains("hide")?"показать ответы":"скрыть ответы"}function cancelHandler(){var e=this.closest("li");e.querySelector(".commentForm").remove(),null==e.querySelector(".commentsList").children[0]&&e.querySelector(".commentsList").remove(),this.classList.remove("cancelBtn"),this.classList.add("replyBtn"),this.innerText="ответить"}replyButtons.forEach(e=>{e.addEventListener("click",replyHandler)}),hideButtons.forEach(e=>{e.addEventListener("click",hideHandler)});