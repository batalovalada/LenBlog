const firstPage=document.getElementById("page1"),addPostForm=document.getElementById("add-post_form"),textareaHeight=document.getElementById("add-post-textarea").offsetHeight,postPattern=createElement("article","article__item"),postContent=createElement("div","article__content"),postTitle=createElement("h3","article__title"),postFooter=`<div class="article__footer">
                            <ul class="article__data">
                                <li><a class="article__link" href="#"></a></li>
                                <li>
                                    <svg class="article__icon" id="date-acticle" viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M17.1875 14.0625H10.9375V7.8125H14.0625V10.9375H17.1875V14.0625ZM23.4375 1.5625V23.4375H1.5625V1.5625H23.4375ZM20.3125 4.6875H4.6875V20.3125H20.3125V4.6875Z"/>
                                    </svg>
                                    <time class="article__date" datetime=""></time>
                                </li>
                            </ul>
                        </div>`,postText=(postContent.append(postTitle),postContent.insertAdjacentHTML("beforeend",postFooter),postPattern.append(postContent),createElement("div","article__text")),postHeader=createElement("div",".article__header"),postImg='<img class="article__img" src="" alt="">';function newPostHandler(){event.preventDefault();const e=postPattern.cloneNode(!0);var t=this.querySelector("#add-post-input"),a=this.querySelector("#add-post-textarea"),r=this.querySelector("#add-post-file").files[0];let i=this.querySelector('input[name="add-post_type"]:checked').value;""==a.value&&null!=r?e.classList.add("article__item--image"):""!=a.value&&null==r&&e.classList.add("article__item--text");var l=e.querySelector(".article__date"),n=getDate(new Date);if(l.innerText=`${n[2]}.${n[1]}.${n[0]}.`,l.setAttribute("dateTime",`${n[0]}-${n[1]}-${n[2]}T${n[3]}:`+n[4]),e.querySelector(".article__title").innerText=t.value,e.classList.contains("article__item--image")||(e.querySelector(".article__title").after(postText.cloneNode(!0)),e.querySelector(".article__text").innerText=a.value),!e.classList.contains("article__item--text")){e.prepend(postHeader.cloneNode(!0));const s=new FileReader;s.onloadend=function(){e.querySelector(".article__img").src=s.result},r?s.readAsDataURL(r):e.querySelector(".article__img").src="",e.querySelector(".article__img").alt=t.value}switch(e.querySelector(".article__link").href=i+".html",!0){case"experience"==i:i="Личный опыт";break;case"guide"==i:i="Путеводитель";break;case"manual"==i:i="Методичка";break;case"recommended"==i:i="Рекомендуемое"}e.querySelector(".article__link").innerText=i,firstPage.prepend(e),t.value="",a.value="",this.querySelector("#add-post-file").value="",document.getElementById("add-post-textarea").style.height=textareaHeight+"px"}function getDate(e){return[""+e.getFullYear(),rigthTime(e.getMonth()+1),rigthTime(e.getDate()),rigthTime(e.getHours()),rigthTime(e.getMinutes())]}function rigthTime(e){return 1==(""+e).length?"0"+e:""+e}function createElement(e,t="",a=""){var r=document.createElement(e);for(item of t=t.split(" "))r.classList.add(item);return r.innerText=a,r}postHeader.insertAdjacentHTML("beforeend",postImg),addPostForm.addEventListener("submit",newPostHandler);